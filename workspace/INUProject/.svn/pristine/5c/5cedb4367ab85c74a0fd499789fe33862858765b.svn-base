<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>    
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="security" %>  
  
<div>
	<security:authorize url="/mypage.do">
		<security:authentication property="principal" var="memberVOWrapper"/>
		<security:authentication property="principal.realMember" var="authMember"/>
		<c:if test="${not empty authMember.memImg }">
			<img class="profile" src="data:image/*;base64,${authMember.base64MemImg }" />
		</c:if>
		<c:if test="${empty authMember.memImg }">
			<img class="profile" src="<c:url value='/resources/images/noImage.png'/>" />
		</c:if>
		<a href="<c:url value='/mypage.do'/>">${authMember.memName }[${authMember.memRole }]님</a>
		<a href="#" class="logoutBtn">로그아웃</a>
	</security:authorize>
	<security:authorize url="/member/memberInsert.do">
		<a href="<c:url value='/login'/>">로그인</a>
		<a href="<c:url value='/join/seeker'/>">회원가입</a>
	</security:authorize>
</div>


<!-- gridstack -->
<link href="<%=request.getContextPath()%>/resources/index/node_modules/gridstack/dist/gridstack.min.css" rel="stylesheet"/>
<script src="${pageContext.request.contextPath}/resources/index/node_modules/gridstack/dist/gridstack-all.js"></script>
<style type="text/css">
	.grid-stack { background: transparent; }
	.grid-stack-item-content {
		background-color: white;
		border-radius: 16px;
	}
</style>
<div class="grid-stack"></div>

<script>
  var items = [
    {x: 0, y: 0, w: 3, h: 3, content: '프로필'},
    {x: 3, y: 0, w: 6, h: 5, content: '<div id="calendar" style="padding: 3%;"></div>'},
    {x: 9, y: 0, w: 3, h: 4, content: '<div id="schedule" style="padding: 3%;"></div>'},
    {x: 0, y: 3, w: 3, h: 2, content: '알림'},
    {x: 0, y: 5, w: 6, h: 3, content: '선형진행도'},
    {x: 6, y: 5, w: 3, h: 3, content: '관심 목록'},
    {x: 9, y: 4, w: 3, h: 4, content: '클래스 현황'}
  ];
  var grid = GridStack.init();
  grid.margin(25);
  grid.load(items);

</script>

<!-- fullcalendar -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.1/index.global.min.js'></script>
<script>

  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      headerToolbar: {
    	  left: 'prevYear,prev today',
    	  center: 'title',
    	  right: 'dayGridMonth,dayGridWeek, next,nextYear'
      },
      events: [
    	  {
    		  title: '애플 - 백엔드 개발자 - 입사지원서',
    		  start:'2023-02-03',
    		  end: '2023-02-05'
    	  },
    	  {
    		  title: '애플 - 백엔드 개발자 - 자기소개서',
    		  start:'2023-02-08',
    		  end: '2023-02-10'
    	  }
      ]
    });
    calendar.render();
  });
 </script>