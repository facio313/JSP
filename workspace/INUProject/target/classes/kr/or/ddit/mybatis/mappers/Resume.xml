<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.resume.dao.ResumeDAO">
		
		<select id="selectResumeList" parameterType="String" resultType="ResumeVO">
			SELECT *
			FROM RESUME
			WHERE MEM_ID = #{memId}
			AND RESUME_DELETE_DATE IS NULL		
		</select>

		<select id="selectResume" parameterType="String" resultType="ResumeVO">
			SELECT *
			FROM RESUME
			WHERE RESUME_SN = #{resumeSn}
			AND RESUME_DELETE_DATE IS NULL
		</select>

		<select id="selectItemList" parameterType="String" resultType="ResumeItemVO">
			SELECT *
			FROM RESUME_ITEM
			WHERE RESUME_SN = #{resumeSn}
		</select>
		
		<insert id="insertItem" parameterType="ResumeItemVO">
			INSERT INTO RESUME_ITEM (
				RESUME_SN
				, RESUME_ITEM_SN
			) VALUES (
				#{resumeSn}
				, #{resumeItemSn}
			)
		</insert>
		
		<insert id="insertItemList" parameterType="ResumeVO">
			INSERT ALL
				<foreach collection="itemList" item="item" index="idx">
				INTO RESUME_ITEM (
					RESUME_SN
					, RESUME_ITEM_SN
				) VALUES (
					#{item.resumeSn}
					, #{item.resumeItemSn}
				)
				</foreach>
				
			SELECT * FROM DUAL
		</insert>
		
		<delete id="deleteItem" parameterType="String">
			DELETE FROM RESUME_ITEM
			WHERE RESUME_ITEM_SN = #{resumeItemSn}
		</delete>
		
		<delete id="deleteItemInResume" parameterType="ResumeItemVO">
			DELETE FROM RESUME_ITEM
			WHERE RESUME_SN = #{resumeSn} 
			AND RESUME_ITEM_SN = #{resumeItemSn}
		</delete>
		
</mapper>

